<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>平台管理</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta content="" name="description"/>
    <meta content="" name="author"/>

    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="__PUBLIC__/assets/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/assets/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/assets/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/assets/global/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/assets/global/plugins/bootstrap-switch/css/bootstrap-switch.min.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/assets/global/css/components.css" id="style_components" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/assets/global/css/plugins.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/assets/admin/layout/css/layout.css" rel="stylesheet" type="text/css"/>
    <link rel="stylesheet" type="text/css" href="__PUBLIC__/assets/global/plugins/bootstrap-summernote/summernote.css">
    <link id="style_color" href="__PUBLIC__/assets/admin/layout/css/themes/darkblue.css" rel="stylesheet" type="text/css"/>
    <link href="__PUBLIC__/assets/admin/layout/css/custom.css" rel="stylesheet" type="text/css"/>
    <script src="__PUBLIC__/assets/global/plugins/jquery.min.js" type="text/javascript"></script>
    <style>
        .portlet.light.bordered {
            border: 0px solid #e1e1e1 !important;
        }
    </style>
</head>
<body class="page-header-fixed page-quick-sidebar-over-content ">
<!-- BEGIN HEADER -->
<include file="Public/head" />
<!-- END HEADER -->
<div class="clearfix">
</div>
<!-- BEGIN CONTAINER -->
<div class="page-container">
    <div class="page-sidebar-wrapper">
        <div class="page-sidebar navbar-collapse collapse">
            <ul class="page-sidebar-menu" data-keep-expanded="false" data-auto-scroll="true" data-slide-speed="200">
                <include file="Public/common" />
            </ul>
        </div>
    </div>
    <div class="page-content-wrapper">
        <div class="page-content">
            <div class="page-bar" style="margin-bottom:20px;margin-top:-10px;">
                <ul class="page-breadcrumb">
                    <li>
                        <i class="fa fa-home"></i>
                        <a href="__MODULE__/User/index">用户管理</a>
                    </li>
                    <li>
                        <i class="fa fa-angle-right"></i>
                        <small style="color:#888888">用户修改</small>
                    </li>
                </ul>
            </div>
            <div class="row">
                <div class="col-md-12">
                    <div class="portlet light portlet-fit portlet-datatable bordered" id="form_wizard_1">
                        <div class="portlet-title">
                            <div class="caption">
                                <i class="fa fa-globe"></i>用户修改
                            </div>
                        </div>
                        <div class="portlet-body">
                            <form role="form" class="form-horizontal form" enctype="multipart/form-data" action="__CONTROLLER__/editAction" method="post">
                                <div class="form-body">
                                    <div class="form-group">
                                        <label class="control-label col-md-2">头像</label>
                                        <div class="col-md-7">
                                            <input type="file" style="border-left:0px;border-top:0px;border-right:0px;border-bottom:1px" id="file" name="pic" class="form-control" accept="image/*" />
                                        </div>
                                        <div class="col-md-3"><h5>注：上传图片不要超过1M大小</h5></div>
                                    </div>

                                    <div class="form-group">
                                        <label class="control-label col-md-2">昵称</label>
                                        <div class="col-md-10">
                                            <input type="text" class="form-control" id="name" name="name" value="{$res.name}"  />
                                            <span class="tip"></span>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <label class="control-label col-md-2">密码</label>
                                        <div class="col-md-10">
                                            <input type="password" class="form-control" id="pwd" name="pwd" value="{$res.pwd}"  />
                                            <span class="tip"></span>
                                        </div>
                                    </div>
                                    <!--<div class="form-group">-->
                                        <!--<label class="control-label col-md-2">性别</label>-->
                                        <!--<div class="col-md-10">-->
                                            <!--<select class="form-control" name="sex" >-->
                                                <!--<option value="{$res.sex}">{$res.sex}</option>-->
                                                <!--<option value="0">女</option>-->
                                                <!--<option value="1">男</option>-->
                                            <!--</select>-->
                                        <!--</div>-->
                                    <!--</div>-->
                                    <div class="form-group">
                                        <label class="control-label col-md-2">手机号</label>
                                        <div class="col-md-10">
                                            <input type="number" class="form-control" id="phone" name="tel" value="{$res.phone}"   />
                                            <span class="tip"></span>
                                            <span class="sj" style="display:none;color:red;">手机号已存在！</span>
                                        </div>
                                    </div>

                                    <div class="form-group" style="margin-top:10px;">
                                        <div class="col-md-4 col-md-offset-1"></div>
                                        <div class="col-md-4">
                                            <input type="hidden" class="uid" name="id" value="{$res['id']}" />
                                            <!--<input type="hidden" name="ypic" value="{$res['pic']}" />-->
                                            <input type="hidden" class="p" name="p" value="{$p}" />
                                            <input type="hidden" class="sele" name="sele" value="{$sele}" />
                                            <input type="submit" value="提交" class="btn btn-success" style='width:100px;'/>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<include file="Public/foot" />

<script src="__PUBLIC__/assets/global/plugins/respond.min.js"></script>
<script src="__PUBLIC__/assets/global/plugins/excanvas.min.js"></script>
<script src="__PUBLIC__/assets/global/plugins/jquery-migrate.min.js" type="text/javascript"></script>
<!-- IMPORTANT! Load jquery-ui.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
<script src="__PUBLIC__/assets/global/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
<script src="__PUBLIC__/assets/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>

<script type="text/javascript" src="__PUBLIC__/assets/global/plugins/select2/select2.min.js"></script>
<script type="text/javascript" src="__PUBLIC__/assets/global/plugins/datatables/media/js/jquery.dataTables.min.js"></script>
<!--验证js-->
<script src="__PUBLIC__/assets/global/plugins/jquery-validation/js/jquery.validate.js" type="text/javascript"></script>

<!--开始页面级别的脚本-->
<script src="__PUBLIC__/assets/global/scripts/metronic.js" type="text/javascript"></script>
<script src="__PUBLIC__/assets/admin/layout/scripts/layout.js" type="text/javascript"></script>
<script>
    jQuery(document).ready(function() {
        Metronic.init(); // init metronic core components
        Layout.init(); // init current layout
        Layout.setSidebarMenuActiveLink('set', $('#user'));
    });
</script>
<!--上传图片限制-->
<script type="text/javascript">
    file = document.getElementById('file');
    file.addEventListener('change',function(){
        size = this.files[0].size/1024
        console.log(size+'KB')

        // 如果大于1024KB
        if(size>1024){
            submit.disabled=true;
            if(confirm("图片过大！！！")){
                //跳转网页,并携带参数
                //window.location="__CONTROLLER__/delTypeAction/id/"+id;
            }
        }else{
            // 小于等于1024
            submit.disabled=false;
        }
    })
</script>

<script>
    $(function () {
        $(".form-horizontal").validate({
            /*自定义验证规则*/
            rules:{
                area:{ required:true },
                name:{ required:true },
                phone:{ required:true },
                // idnum:{ required:true },
                pwd:{ required:true }
            },messages: {
                name: {
                    required: "<span style='color:red;'>请输入姓名！</span>"　　//注意，同样是必填项，但是优先显示在messages里的提示信息
                },
                // idnum: {
                //     required: "<span style='color:red;'>请输入身份证号！</span>"　　//注意，同样是必填项，但是优先显示在messages里的提示信息
                // },
                pwd: {
                    required: "<span style='color:red;'>请输入用户密码！</span>"　　//注意，同样是必填项，但是优先显示在messages里的提示信息
                },
                area: {
                    required: "<span style='color:red;'>请输入地址！</span>"　　//注意，同样是必填项，但是优先显示在messages里的提示信息
                },
                phone:{
                    required:"<span style='color:red;'>请输入手机号！</span>"　　//不会统一输出 必填字段 了哦
                }
            },
            /*单击后验证*/
            submitHandler:function(form){
                // var idnum = $("#idnum").val();
                var phone = $("#phone").val();
                var uid = $(".uid").val();
                $.ajax({
                    type:"get",
                    url:"__CONTROLLER__/vadataajax",
                    data:{idnum:idnum,phone:phone,uid:uid},
                    success:function(data){
                        console.log(data);
                        // if(data == 2){ //身份证
                        //     $('.idnum').css('display','block');
                        //     return false;
                        // }else
                        if(data == 3){ //手机
                            $('.sj').css('display','block');
                            return false;
                        }else if(data == 4){
                            form.submit();
                        }
                    }
                });
            }
        });
    })
</script>
</body>
</html>